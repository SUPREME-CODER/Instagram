{% extends 'base.html' %}

{% load static %}

{% block content %}

      <article class='media'>
        <div class='media-left'>
          <figure class='image is-256x256'>
            <img class="is-rounded" src='{% if profile.picture %} {{ profile.picture.url }} {% else %} https://bulma.io/images/placeholders/256x256.png {% endif %}'>
          </figure>
        </div>

        <div class="media-content">
          <div class='content'>
          <h1 class='title is-1' style='font-weight: bold'>{% if profile.first_name %}{{ profile.first_name}} {{ profile.last_name }}{% endif %}</h1>
          <h2 class='subtitle is-3'>@{{ profile.user }}</h2>

          {% if user.is_authenticated and user != profile.user %}
            <div class="media-right">
              {% if follow_status == True %}
                <a href="{% url 'follow' profile.user 0 %}" class='button is-danger'>Unfollow</a>
              {% else %}
                <a href="{% url 'follow' profile.user 1 %}" class='button is-success'>Follow</a>
              {% endif %}
            </div>
          {% endif %}

        </div>
      <nav class="level is-mobile">
        <div class="level-item has-text-centered">
          <div>
            <p class="heading">Posts</p>
            <p class="title">{{ post_count }}</p>
          </div>
        </div>
        <div class="level-item has-text-centered">
          <div>
            <p class="heading">Followers</p>
            <p class="title">{{ follower_count }}</p>
          </div>
        </div>
        <div class="level-item has-text-centered">
          <div>
            <p class="heading">Following</p>
            <p class="title">{{ following_count }}</p>
          </div>
        </div>
    </nav>

    <p class='subtitle is-5'>{% if profile.profile_info %} {{ profile.profile_info }} {% endif %} </p>

    {% if user.is_authenticated and user == profile.user %}
      <a href='{% url "edit-profile" %}' class='button is-info'>Edit Profile</a>
    {% endif %}
    </div>
</article>

        </div>
        </div>
    </div>
  </section>

    <section class="section">
    <div class="container">
<div class="tabs is-centered">
  <ul>
    <li class='{% if url_name == "profile" %}is-active{% endif %}'>
      <a href="{% url 'profile' profile.user %}"> <i class='material-icons'>dashboard</i> Posts</a>
    </li>
    
    {% if user.is_authenticated and user == profile.user %}
    <li class='{% if url_name == "profilefavorites" %}is-active{% endif %}'>
      <a href="{% url 'profilefavorites' profile.user %}"> <i class='material-icons'>save_alt</i> Saved</a>
    </li>
    {% endif %}
    
    <li>
      <a> <i class='material-icons'>portrait</i>Tagged</a>
    </li>
  </ul>
</div>
<!-- IMAGES -->
    <div class="columns is-mobile  is-multiline is-centered">

      {% for post in posts %}
      <div class="column is-one-quarter">
        <div class="box">
          <figure class="image is-256x256">
            <a href="{{ post.get_absolute_url }}"><img src="{{ post.picture.url }}" alt="Image"></a>
          </figure>
        </div>
      </div>
      {% empty %}
        <br><br><br>
        {% if user.is_authenticated and user == profile.user %}
          <h3> You haven't made any posts.</h3>
        {% else %}
          <h3> The user hasn't made any posts yet.</h3>
        {% endif %}
      {% endfor %}
    </div>


  </section>

{% endblock %}